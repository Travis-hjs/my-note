<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>new Date()</title>
        <style>
            *{ padding: 0; margin: 0; }
            .wrap{ width: 100%; max-width: 680px; margin: 0 auto; box-sizing: border-box; padding: 20px; text-align: center; }
        </style> 
    </head>
    <body>
        <div class="wrap"></div>

        <script>
            function createText(text) {
                const _p = document.createElement('p');
                _p.textContent = text;
                document.querySelector('.wrap').appendChild(_p);
            }
            // 日期生成
            function dayJson() {
                var calendar = [],
                    minYears = new Date().getFullYear(),
                    maxYears = new Date().getFullYear() + 10,
                    monthCount = 1,
                    dayCount = 1;
                for (var i = minYears; i <= maxYears; i++) {
                    var _year = {};
                    _year.name = i.toString();
                    _year.sub = [];
                    for (var j = monthCount; j <= 12; j++) {
                        var _month = {};
                        _month.name = ('0' + j.toString()).slice(-2);
                        _month.sub = [];
                        _year.sub.push(_month);
                        dayCount = new Date(i, j, 0).getDate();
                        for (var k = 1; k <= dayCount; k++) {
                            _month.sub.push({
                                name: ('0' + k.toString()).slice(-2)
                            });
                        }
                    }
                    calendar.push(_year);
                }
                // 这里是限制不能选小于之前的日期
                calendar[0].sub.splice(0, new Date().getMonth());
                calendar[0].sub[0].sub.splice(0, new Date().getDate());
                return calendar;
            }

            /**
             * 时间生成器
             *  params: minInterval 时间（5分钟间隔）
            */
            function timeInterval(minInterval) {
                var arr = [],
                    minTotal = 0;
                while (minTotal < 1440) {
                    var hour = parseInt(minTotal / 60),
                        min = parseInt(minTotal % 60);
                    hour = ('0' + hour).slice(-2);
                    min = ('0' + min).slice(-2);
                    arr.push(hour + ':' + min);
                    minTotal += minInterval;
                }
                return arr;
            }
            // console.log(timeInterval(5));
            
            /**
             * 时间戳生成
             * 指定天数 num: 1时为明天，-1为昨天天，以此类推
            */
            function timeFormat(num = 0) {
                let _Appoint, month, day, hour, minute, second, date;
                if (num > 0) {
                    _Appoint = new Date(new Date().getTime() + (num * 24 * 3600 * 1000));
                } else {
                    _Appoint = new Date(new Date() - (num * 24 * 3600 * 1000));
                }
                month = ('0' + (_Appoint.getMonth() + 1)).slice(-2);
                day = ('0' + _Appoint.getDate()).slice(-2);
                hour = ('0' + _Appoint.getHours()).slice(-2);
                minute = ('0' + _Appoint.getMinutes()).slice(-2);
                second = ('0' + _Appoint.getSeconds()).slice(-2);
                date = `${_Appoint.getFullYear()}-${month}-${day} ${hour}:${minute}:${second}`
                return date;
            }
            createText(`日期：${timeFormat(2)}`);
            
            /**
             * 带天数的倒计时
             * times: 秒数
            */
            function countDown(times) {
                let timer = setInterval(() => {
                    if (times <= 0) return clearInterval(timer);
                    let day = 0, hour = 0, minute = 0, second = 0;
                    day = Math.floor(times / (3600 * 24));
                    hour = Math.floor(times / 3600) - (day * 24);
                    minute = Math.floor(times / 60) - (day * 24 * 60) - (hour * 60);
                    second = Math.floor(times) - (day * 24 * 3600) - (hour * 3600) - (minute * 60);
                    // 格式化
                    day = ('0' + day).slice(-2);
                    hour = ('0' + hour).slice(-2);
                    minute = ('0' + minute).slice(-2);
                    second = ('0' + second).slice(-2);
                    console.log(`距离明天10点还剩：${day}天：${hour}小时：${minute}分钟：${second}秒`);
                    times--;
                }, 1000);
            }
            // 获取明天10点的时间戳
            let times = timeFormat(1).slice(-8);
            let timef = timeFormat(1).split(times).join('10:00:00');
            // 计算秒数
            let start = new Date(timeFormat()).getTime(),
                end = new Date(timef).getTime();
            let num = Math.floor(((end - start) / 1000));
            createText(`秒数：${num}, 明天时间：${timef}`)
            // countDown(num);

            /**
             * 将秒数换成时分秒格式
             * return 时 分 秒
            */
            function secondFormat(value) {
                let second = parseInt(value),
                    minute = 0,
                    hour = 0;
                // 如果秒数大于60，将秒数转换成整数
                if (second > 60) {
                    // 获取分钟，除以60取整数，得到整数分钟
                    minute = parseInt(second / 60);
                    // 获取秒数，秒数取佘，得到整数秒数
                    second = parseInt(second % 60);
                    // 如果分钟大于60，将分钟转换成小时
                    if (minute > 60) {
                        // 获取小时，获取分钟除以60，得到整数小时
                        hour = parseInt(minute / 60);
                        // 获取小时后取佘的分，获取分钟除以60取佘的分
                        minute = parseInt(minute % 60);
                    }
                }
                return { hour, minute, second };
            }
            // console.log(secondFormat(3600*5));  

            // 获取两个日期之间的天数
            let getDaysDiffBetweenDates = (dateInitial, dateFinal) => Math.floor((dateFinal - dateInitial) / (1000 * 3600 * 24));
            console.log(getDaysDiffBetweenDates(new Date('2017-12-13'), new Date('2018-5-17')));

            
            
        </script>
    </body>
</html>